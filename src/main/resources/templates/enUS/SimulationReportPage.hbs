{{#partial "htmHead"}}{{> htmHeadSimulationReportPage}}{{/partial}}
{{#partial "htmTitle"}}{{> htmTitleSimulationReportPage}}{{/partial}}
{{#partial "htmMeta"}}{{> htmMetaSimulationReportPage}}{{/partial}}
{{#partial "htmStyle"}}{{> htmStyleSimulationReportPage}}{{/partial}}
{{#partial "htmScripts"}}{{> htmScriptsSimulationReportPage}}{{/partial}}
{{#partial "htmScript"}}{{> htmScriptSimulationReportPage}}
		<script>
async function websocketSimulationReportInner2(apiRequest) {
	var pk = apiRequest['pk'];
	var vars = apiRequest['vars'];
	if(pk != null) {
		websocketSimulationReportInner(apiRequest);

		if(vars.includes('updatedPerformance')) {
			var queryParams = "?" + $(".pageSearchVal").get().filter(elem => elem.innerText.length > 0).map(elem => elem.innerText).join("&");
			var uri = location.pathname + queryParams;
			$.get(uri, {}, function(data) {
				var $response = $("<html/>").html(data);
				$('.plotPerformance').each(function(index, fragment) {
					var $fragment = $(fragment);
					$fragment.replaceWith($response.find(".plotPerformance"));
				});
				$('.plotGreenLengthThresholdVehicle').each(function(index, fragment) {
					var $fragment = $(fragment);
					$fragment.replaceWith($response.find(".plotGreenLengthThresholdVehicle"));
				});
			}, 'html');

			addGlow($('.plotPerformance'));
		}
	}
}
		</script>
{{/partial}}
{{#partial "websocket"}}
				websocketSimulationReport(websocketSimulationReportInner2);
{{/partial}}
{{#partial "htmBodySidebar"}}{{> htmBodySidebarSimulationReportPage}}{{/partial}}
{{#partial "htmBodyStart"}}{{> htmBodyStartSimulationReportPage}}{{/partial}}
{{#partial "htmBodyMiddle"}}{{> htmBodyMiddleSimulationReportPage}}{{/partial}}
{{#partial "htmBodyEnd"}}{{> htmBodyEndSimulationReportPage}}{{/partial}}
{{#partial "htmBody"}}{{> htmBodySimulationReportPage}}{{/partial}}
{{#partial "htmBodySearch"}}{{> htmBodySearchSimulationReportPage}}{{/partial}}
{{#partial "htmBodyFilters"}}{{> htmBodyFiltersSimulationReportPage}}{{/partial}}
{{#partial "htmBodyRange"}}{{> htmBodyRangeSimulationReportPage}}{{/partial}}
{{#partial "htmBodyPivot"}}{{> htmBodyPivotSimulationReportPage}}{{/partial}}
{{#partial "htmBodyFieldList"}}{{> htmBodyFieldListSimulationReportPage}}{{/partial}}
{{#partial "htmBodyStats"}}{{> htmBodyStatsSimulationReportPage}}{{/partial}}
{{#partial "htmBodyMenu"}}{{> htmBodyMenuSimulationReportPage}}{{/partial}}
{{#partial "htmBodyGraph"}}{{> htmBodyGraphSimulationReportPage}}{{/partial}}
{{#partial "htmBodyCount0"}}{{> htmBodyCount0SimulationReportPage}}{{/partial}}
{{#partial "htmBodyCount1All"}}{{> htmBodyCount1AllSimulationReportPage}}{{/partial}}
{{#partial "htmBodyCount1"}}{{> htmBodyCount1SimulationReportPage}}{{/partial}}
{{#partial "htmBodyAll"}}{{> htmBodyAllSimulationReportPage}}{{/partial}}
{{#partial "htmForm"}}
<h3>Actions:</h3>
<button class="w3-btn w3-round w3-border w3-border-black w3-ripple w3-padding w3-2017-shaded-spruce " id="refreshThisSimulationReportGenPage" onclick="$.ajax({ url: '/api/run-simulation-report?' + $.param([ {name: 'fq', value: 'pk:{{ pk }}' } ]) , dataType: 'json' , type: 'PATCH' , contentType: 'application/json; charset=utf-8' , data: JSON.stringify({}) }); ">
	<i class="fas fa-edit " aria-hidden="true"></i>
	Run Report
</button>
{{> htmFormSimulationReportPage}}
{{/partial}}
{{#partial "htmForms"}}
{{> htmFormsSimulationReportPage}}
<h3>Actions:</h3>
<button class="w3-btn w3-round w3-border w3-border-black w3-ripple w3-padding w3-2017-shaded-spruce " id="refreshThisSimulationReportGenPage" onclick="$.ajax({ url: '/api/run-simulation-report?' + $.param([ {name: 'fq', value: 'pk:{{ pk }}' } ]) , dataType: 'json' , type: 'PATCH' , contentType: 'application/json; charset=utf-8' , data: JSON.stringify({}) }); ">
	<i class="fas fa-edit " aria-hidden="true"></i>
	Run Report
</button>
{{/partial}}
{{#partial "htmBodySuggested"}}{{> htmBodySuggestedSimulationReportPage}}{{/partial}}
{{#partial "htmForm_patchSimulationReport"}}{{> htmFormSimulationReportPage_patchSimulationReport}}{{/partial}}
{{#partial "htmForm_postSimulationReport"}}{{> htmFormSimulationReportPage_postSimulationReport}}{{/partial}}
{{#partial "htmForm_putimportSimulationReport"}}{{> htmFormSimulationReportPage_putimportSimulationReport}}{{/partial}}
{{#partial "htmForm_searchpageSimulationReport"}}{{> htmFormSimulationReportPage_searchpageSimulationReport}}

<div>
	<img class="plotPerformance" class="plotPerformance " src="data:image/png;base64,{{ plotPerformance }}"/>
</div>
<div>
	<img class="plotGreenLengthThresholdVehicle" class="plotGreenLengthThresholdVehicle " src="data:image/png;base64,{{ plotGreenLengthThresholdVehicle }}"/>
</div>
{{/partial}}
{{> SimulationReportGenPage}}
